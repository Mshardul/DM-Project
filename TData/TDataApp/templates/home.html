{% load static %}

<!DOCTYPE html>
<html>
<head>
	<title>DB Form</title>
	
	<script type="text/javascript" src="{% static "js/jquery-3.2.1.min.js" %}"></script>
	<script type="text/javascript" src="{% static "js/bootstrap.min.js" %}"></script>
	<script type="text/javascript" src="{% static "js/sweetalert.min.js" %}"></script>
	
	<link rel="stylesheet" type="text/css" href="{% static "css/bootstrap.min.css" %}">
	<link rel="stylesheet" type="text/css" href="{% static "css/bootstrap.css" %}">

</head>
	<body>
		<br>
		<div class="row"> 
			<div class="col-md-offset-2 col-md-8"  style="border: 5px solid gray">
				<form>
					<div class="form-group">
						<label for="db_name">DB Name:</label>
						<input type="text" name="db_name" class="form-control" id="db_name">
					</div>
					<div id="addColDiv">
						<table class="table">
							<thead>
								<tr>
									<!-- <th>Temporal Attribute</th> -->
									<th>Attribute Name</th>
									<th>Attribute Type</th>
								</tr>
							</thead>
							<tbody id="db_table"></tbody>
						</table>
					</div>
					<hr>
					<div class="row">
						<div class="col-md-6">
							<div id="addColBtn">
								<span class="icon-input-btn">
									<!-- <span class="glyphicon glyphicon-plus"></span> -->
									<input type="button" class="btn btn-default" onclick="AddCol()" value="Add Column">
								</span>
							</div>
						</div>
						<div class="col-md-6">
							<div id="addColBtn" style="float:right">
								<span class="icon-input-btn">
									<!-- <span class="glyphicon glyphicon-check"></span> -->
									<input type="button" class="btn btn-primary" onclick="AddDb()" value="Submit">
								</span>
							</div>
						</div>
					</div>
					<br>
				</form>
			</div>
		</div>
	</body>
	<script type="text/javascript">
		var dataTypes = ['int', 'string'];
		$(document).ready(function(){
			$('#db_table').hide();
			// GetDataTypes(); //getdatatypes from ajax, here;
		})
		function AddCol(){
			$('#db_table').show();
			// var check = "<td><input type='checkbox' name='temporal' value='0'>"
			var name = '<td><input type="text" class="colName"></td>';

			// var type = "<td><div class='dropdown'><button class='btn btn-default dropdown-toggle' type='button' id='dropdownMenu1' data-toggle='dropdown' aria-haspopup='true' aria-expanded='true'>Data Type <span class='caret'></span></button><ul class='dropdown-menu aria-labelledby='dropdownMenu1'>";

			// for(var dt in dataTypes){
			// 	type += "<li><a href='#'>"+dataTypes[dt]+"</a></li>";
			// }
			// type += "</ul></div>";

			var type = '<td><select class="form-group colType">';
			for(var i=0; i<dataTypes.length; i++){
				type += '<option value="'+i+'">'+dataTypes[i]+'</option>';
			}
			type += '</select></td>';
			console.log(type);

			$('#db_table').append("<tr>"+name+type+"</tr>");
		}

		function AddDb(){
			var dbName = $('#db_name').val();
			// alert(dbName);
			if(dbName==''){
				swal('', 'Please Insert DB Name', 'error');
				return;
			}

			var data=[];
			$('#db_table tr').each(function(){
				var attrName = $(this).find(".colName").val();
				var attrType = $(this).find(".colType").val();
				data.push({name: attrName, type: attrType});
				// data[attrName]=attrType;
			})

			console.log(data);

			// ajax request to send data to backend
		}
	</script>
</html>